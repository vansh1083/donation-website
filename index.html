<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="utf-8" />
<meta name="viewport" content="width=device-width,initial-scale=1" />
<title>Global Relief â€¢ Donate for Life</title>
<style>
:root{
  --accent:#0376c6;
  --muted:#6b7280;
  --card:#ffffff;
  --bg:linear-gradient(180deg,#f3f7fb 0%, #eef6fb 100%);
}
*{box-sizing:border-box}
body{
  margin:0; font-family:Inter,system-ui,Roboto,Arial; background:var(--bg); color:#07203a;
}
header{display:flex;align-items:center;justify-content:space-between;padding:12px 18px;background:#fff;box-shadow:0 2px 8px rgba(0,0,0,0.04);position:sticky;top:0;z-index:60}
.brand{font-weight:800;color:var(--accent)}
.btn{background:var(--accent);color:#fff;padding:10px 14px;border-radius:10px;text-decoration:none;font-weight:700;display:inline-block}
.container{max-width:980px;margin:18px auto;padding:0 14px}
/* HERO */
.hero{display:flex;gap:18px;align-items:center;background-image:
linear-gradient(180deg, rgba(3,118,198,0.48), rgba(3,118,198,0.18)),
/* HERO IMAGE: Replaced Unsplash URL with assumed local path */
url('images/hero_background.jpg'); 
background-size:cover;background-position:center;border-radius:12px;color:#fff;padding:30px}
.hero h1{margin:0;font-size:22px}
.hero p{margin:8px 0 0;color:rgba(255,255,255,0.95);max-width:680px}
/* counter - centered and sticky top */
.top-counter{
position:fixed;left:50%;transform:translateX(-50%);top:76px;z-index:70;
background:rgba(255,255,255,0.95);padding:8px 14px;border-radius:999px;box-shadow:0 6px 18px rgba(0,0,0,0.08);display:flex;gap:10px;align-items:center;font-weight:700;
transition: opacity 0.3s ease, visibility 0.3s ease;
}
.top-counter .label{font-weight:600;color:var(--muted);font-size:12px}
.top-counter .num{color:var(--accent);font-size:18px}
/* grid cards */
.section{margin-top:120px}
.section h2{color:var(--accent);margin:6px 0 12px}
.grid{display:grid;grid-template-columns:repeat(auto-fit,minmax(240px,1fr));gap:14px}
.card{background:var(--card);border-radius:10px;overflow:hidden;box-shadow:0 6px 18px rgba(2,44,76,0.06);display:flex;flex-direction:column}
.card img{width:100%;height:150px;object-fit:cover}
.card .body{padding:12px}
.card .foot{padding:12px;border-top:1px solid #f1f5f9;display:flex;justify-content:space-between;align-items:center}
/* donate panel */
.donate-panel{margin-top:22px;display:flex;gap:16px;flex-wrap:wrap}
.panel{flex:1 1 320px;background:var(--card);border-radius:10px;padding:16px;box-shadow:0 6px 18px rgba(2,44,76,0.06)}
.muted{color:var(--muted);font-size:14px}
/* modal */
.modal-backdrop{display:none;position:fixed;inset:0;background:rgba(2,20,40,0.45);z-index:200;align-items:center;justify-content:center}
.modal{width:94%;max-width:520px;background:#fff;border-radius:12px;padding:18px;box-shadow:0 12px 28px rgba(2,20,40,0.22)}
.form-row{display:flex;gap:8px;align-items:center;margin-top:10px}
.form-row input,.form-row select{flex:1;padding:10px;border-radius:8px;border:1px solid #e6eef7;font-size:15px}
/* celebration */
.celebrate-wrap{display:none;position:fixed;inset:0;z-index:1000;pointer-events:none}
.left-fire,.right-fire{position:absolute;top:50%;width:180px;height:180px;opacity:0;filter:drop-shadow(0 8px 18px rgba(0,0,0,0.25))}
.left-fire{left:8%}
.right-fire{right:8%}
.center-blast{position:absolute;left:50%;top:40%;transform:translate(-50%,-50%);width:260px;height:260px;opacity:0}
.celebrate-msg{position:fixed;left:50%;top:58%;transform:translate(-50%,-50%);background:rgba(255,255,255,0.98);padding:18px;border-radius:12px;box-shadow:0 8px 30px rgba(2,20,40,0.18);text-align:center;z-index:1001;display:none}
/* confetti */
canvas{position:fixed;pointer-events:none;inset:0;z-index:1500;display:none}
@media(max-width:680px){
.hero{padding:18px}
.top-counter{top:92px}
}
</style>
</head>
<body>
<header>
<div class="brand">Global Relief â€¢ Donate for Life</div>
<nav>
<a class="btn" href="#donate" id="ctaTop">Donate</a>
</nav>
</header>
<div class="top-counter" id="topCounter">
<div class="label">Estimated supporters today</div>
<div class="num" id="counterNum">5,200+</div>
</div>
<main class="container">
<section class="hero" role="banner">
<div>
<h1>Fast help for disasters, medical emergencies & the environment</h1>
<p>We provide immediate support to families affected by incidents, fund medical care, and plant trees to restore habitats.</p>
</div>
</section>
<section class="section" id="causes">
<h2>What we support</h2>
<div class="grid">
<div class="card">
<img src="images/disaster.jpg" alt="Disaster">
<div class="body"><h3>Disaster Relief</h3><p>Food, shelter and rebuilding after floods, storms and earthquakes.</p></div>
<div class="foot"><span class="muted">Immediate help</span><a class="btn donateBtn" href="#donate">Donate</a></div>
</div>
</div>
<div class="card">
  <img src="images/trees.jpg" alt="Trees">
  <div class="body"><h3>Tree Plantation</h3><p>Planting and protecting trees to restore habitats and cool communities.</p></div>
  <div class="foot"><span class="muted">Environment</span><a class="btn donateBtn" href="#donate">Donate</a></div>
</div>

<div class="card">
  <img src="images/incident.jpg" alt="Incident">
  <div class="body"><h3>Attack & Incident Support</h3><p>Support for victims and families affected by sudden incidents and attacks.</p></div>
  <div class="foot"><span class="muted">Family aid</span><a class="btn donateBtn" href="#donate">Donate</a></div>
</div>

<div class="card">
  <img src="images/family.jpg" alt="Family">
  <div class="body"><h3>Family Support</h3><p>Direct help for families who suddenly lose their primary earners or face hardship.</p></div>
  <div class="foot"><span class="muted">Support</span><a class="btn donateBtn" href="#donate">Donate</a></div>
</div>

<div class="card">
  <img src="images/medical.jpg" alt="Medical">
  <div class="body"><h3>Medical Emergencies</h3><p>Help for life-saving treatment when families cannot pay medical bills.</p></div>
  <div class="foot"><span class="muted">Health</span><a class="btn donateBtn" href="#donate">Donate</a></div>
</div>

</div> </section>

<section id="donate" class="section">
  <h2>Donate</h2>
  <div class="donate-panel">
    <div class="panel">
      <h4>Donate for Life</h4>
      <p class="muted">Enter details and choose payment method. Min â‚¹500 for UPI, Min 50 for international/PayPal.</p>
      <div style="margin-top:12px"><a id="openDonatePopup" class="btn" href="#">Donate Now</a></div>
    </div>
    <div class="panel">
      <h4>About donations</h4>
      <p class="muted">Funds are received in INR. For large donations contact us for professional payout options.</p>
    </div>
  </div>
</section>

</main>

<footer style="margin-top:26px;padding:18px 0;text-align:center;color:#fff;background:var(--accent)">Â© <span id="year"></span> Global Relief â€¢ Honest payouts</footer>

<div id="donateBackdrop" class="modal-backdrop" role="dialog" aria-hidden="true">
  <div class="modal" role="document">
    <h3>Donate for Life</h3>
    <p class="muted">Enter amount, your details, then press Pay.</p>

    <div class="form-row">
      <input id="donorName" type="text" placeholder="Full Name" />
    </div>
    <div class="form-row">
      <input id="donorEmail" type="email" placeholder="Email" />
    </div>
    <div class="form-row">
      <input id="donorPhone" type="tel" placeholder="Phone Number" />
    </div>

    <div class="form-row">
      <input id="donationAmount" type="number" min="1" placeholder="Amount" />
      <select id="donationCurrency">
        <option value="INR">INR - â‚¹</option>
        <option value="USD">USD - $</option>
        <option value="EUR">EUR - â‚¬</option>
        <option value="GBP">GBP - Â£</option>
        <option value="AED">AED - Ø¯.Ø¥</option>
        <option value="AUD">AUD - $</option>
        <option value="CAD">CAD - $</option>
      </select>
    </div>

    <div style="margin-top:10px">
      <button id="payButton" class="btn">Pay</button>
      <button id="payWithUpi" class="btn" style="background:#20a2a0;margin-left:8px">Pay via UPI</button>
    </div>

    <div style="margin-top:12px" class="actions">
      <button id="cancelDonate" class="secondary">Cancel</button>
    </div>
  </div>
</div>

<div id="upiBackdrop" class="modal-backdrop" role="dialog" aria-hidden="true">
  <div class="modal" role="document">
    <h3>Pay via UPI</h3>
    <p class="muted">Scan QR or open UPI app to pay. Make sure you enter the same amount (min â‚¹500).</p>
    <div style="text-align:center;margin-top:10px">
      <img id="upiQr" src="" alt="UPI QR" style="width:180px;height:180px;border-radius:8px;box-shadow:0 6px 18px rgba(0,0,0,0.06)" />
    </div>
    <div style="margin-top:10px;text-align:center">
      <div class="muted">UPI ID: <strong id="upiIdText">vanshsharma248417-1@okaxis</strong></div>
      <div style="margin-top:8px"><a id="openUpiLink" class="btn" href="#">Open in UPI app</a></div>
    </div>
    <div style="margin-top:12px" class="actions">
      <button id="closeUpi" class="secondary">Close</button>
    </div>
  </div>
</div>

<div class="celebrate-wrap" id="celebrateWrap">
  <img class="left-fire" id="leftFire" src="data:image/svg+xml;utf8,<svg xmlns='http://www.w3.org/2000/svg' width='180' height='180'><circle cx='90' cy='90' r='80' fill='%23ffcf66'/></svg>" alt="">
  <img class="right-fire" id="rightFire" src="data:image/svg+xml;utf8,<svg xmlns='http://www.w3.org/2000/svg' width='180' height='180'><circle cx='90' cy='90' r='80' fill='%23ff7b7b'/></svg>" alt="">
  <img class="center-blast" id="centerBlast" src="data:image/svg+xml;utf8,<svg xmlns='http://www.w3.org/2000/svg' width='260' height='260'><g><circle cx='130' cy='130' r='110' fill='%23ffd54f' opacity='0.95'/></g></svg>" alt="">
</div>
<div class="celebrate-msg" id="celebrateMsg">
  <h2>ðŸŽ‰ Congratulations!</h2>
  <p id="celebrateText">Thank you â€” your donation will help people in need.</p>
  <div style="margin-top:12px"><button id="closeCelebrate" class="btn">Continue</button></div>
</div>
<canvas id="confCanvas"></canvas>

<script>
// ---------- CONFIG ----------
const PAYPAL_ME = "https://www.paypal.com/paypalme/globalrelieffund"; // your provided PayPal.me link
const UPI_ID = "vanshsharma248417-1@okaxis";

// Donation minimums
const MIN_INR = 500;
const MIN_INTL = 50;

// QR generator (public service)
function upiQrUrl(upiId, amount){
  const upi = `upi://pay?pa=${encodeURIComponent(upiId)}&pn=Global%20Relief&am=${encodeURIComponent(amount)}&cu=INR`;
  return 'https://api.qrserver.com/v1/create-qr-code/?size=300x300&data=' + encodeURIComponent(upi);
}

// ---------- UI refs ----------
document.getElementById('year').textContent = new Date().getFullYear();
const donateBackdrop = document.getElementById('donateBackdrop');
const upiBackdrop = document.getElementById('upiBackdrop');
const heroSection = document.querySelector('.hero');
const topCounter = document.getElementById('topCounter');
const payButton = document.getElementById('payButton');
const payWithUpi = document.getElementById('payWithUpi');
const donationAmountInput = document.getElementById('donationAmount');
const donationCurrencySelect = document.getElementById('donationCurrency');


// Helper: validate basic details
function validateDonorDetails(){
  const name = document.getElementById('donorName').value.trim();
  const email = document.getElementById('donorEmail').value.trim();
  const phone = document.getElementById('donorPhone').value.trim();
  if(!name || !email || !phone){
    alert('Please fill Name, Email and Phone.');
    return false;
  }
  return true;
}

// --- Counter Visibility on Scroll ---
topCounter.style.opacity = '0';
topCounter.style.visibility = 'hidden';

function handleScroll() {
  const heroBottom = heroSection.getBoundingClientRect().bottom;
  if (heroBottom < 0) { // Scrolled past the hero
    topCounter.style.opacity = '1';
    topCounter.style.visibility = 'visible';
  } else {
    topCounter.style.opacity = '0';
    topCounter.style.visibility = 'hidden';
  }
}
window.addEventListener('scroll', handleScroll);
window.addEventListener('load', handleScroll);


// --- Currency and Button Logic ---

function updatePaymentButtons() {
    const currency = donationCurrencySelect.value;
    const isINR = currency === 'INR';

    // Show/Hide UPI button
    payWithUpi.style.display = isINR ? 'inline-block' : 'none';

    // Update main 'Pay' button text hint
    if (isINR) {
        payButton.textContent = 'Pay (Min â‚¹' + MIN_INR + ')';
    } else {
        // Ensure currency symbol is shown correctly, like 'USD50'
        payButton.textContent = 'Pay (Min ' + currency + MIN_INTL + ')'; 
    }

    // Update placeholder/min attribute for amount input
    const minAmount = isINR ? MIN_INR : MIN_INTL;
    donationAmountInput.setAttribute('min', minAmount);
    donationAmountInput.placeholder = 'Amount (Min ' + minAmount + ')';

    // Auto-fill min amount if current amount is too low
    const currentAmount = Number(donationAmountInput.value);
    if (currentAmount > 0 && currentAmount < minAmount) {
        donationAmountInput.value = minAmount;
    } else if (currentAmount === 0 || isNaN(currentAmount)) {
        donationAmountInput.value = ''; // Clear if zero/empty for better UX
    }
}

// Initial setup and listener
donationCurrencySelect.addEventListener('change', updatePaymentButtons);
donationAmountInput.addEventListener('input', updatePaymentButtons);
document.addEventListener('DOMContentLoaded', updatePaymentButtons);

// --- Modal Open/Close Logic ---

// open popup function
function openDonateModal(e) {
  if (e) e.preventDefault();
  donateBackdrop.style.display='flex';
  donateBackdrop.setAttribute('aria-hidden','false');
  updatePaymentButtons(); // Ensure buttons are correct when opening
}

document.getElementById('openDonatePopup').addEventListener('click', openDonateModal);
document.getElementById('cancelDonate').addEventListener('click', ()=>donateBackdrop.style.display='none');
document.querySelectorAll('.donateBtn').forEach(b=>{
  b.addEventListener('click', openDonateModal);
});
document.getElementById('ctaTop').addEventListener('click', e=>{
  e.preventDefault();
  openDonateModal();
  window.location.hash='#donate';
});

// close UPI
document.getElementById('closeUpi').addEventListener('click', ()=>upiBackdrop.style.display='none');

// --- Payment Logic ---

function handlePayment(isUpiExplicit = false) {
    if(!validateDonorDetails()) return;

    const amount = Number(donationAmountInput.value);
    const currency = donationCurrencySelect.value || 'INR';
    const isINR = currency === 'INR';

    // Check minimums
    if (isINR && amount < MIN_INR) {
        alert('Minimum UPI/INR donation is â‚¹' + MIN_INR);
        return;
    } else if (!isINR && amount < MIN_INTL) {
        alert('Minimum international donation is ' + currency + MIN_INTL);
        return;
    }
    
    // Fallback for primary 'Pay' button if explicit UPI isn't used and not INR
    if (!isUpiExplicit && !isINR) {
        // international -> use PayPal.me
        const link = PAYPAL_ME.replace(/\/$/, '') + '/' + encodeURIComponent(amount);
        window.open(link, '_blank');
        donateBackdrop.style.display='none';
        setTimeout(()=>{ if(confirm('After completing your payment, press OK to show the thank-you celebration.')) doCelebrate(); }, 1200);
        return;
    }
    
    // UPI Flow (triggered by 'Pay' button when INR is selected, or 'Pay with UPI' button)
    if (isINR) {
        const upiDeep = `upi://pay?pa=${encodeURIComponent(UPI_ID)}&pn=Global%20Relief&am=${encodeURIComponent(amount)}&cu=INR`;
        
        // Set up QR modal
        document.getElementById('upiQr').src = upiQrUrl(UPI_ID, amount);
        document.getElementById('upiIdText').textContent = UPI_ID;
        document.getElementById('openUpiLink').href = upiDeep;
        
        upiBackdrop.style.display='flex';
        donateBackdrop.style.display='none';
        
        // Attempt to open deep link on mobile
        setTimeout(()=> {
            try { window.location.href = upiDeep; } catch(e) {}
        }, 300);
    }
}

document.getElementById('payButton').addEventListener('click', () => handlePayment(false));
document.getElementById('payWithUpi').addEventListener('click', () => handlePayment(true));


// --- Celebration function (fireworks + confetti + message) ---

const celebrateWrap = document.getElementById('celebrateWrap');
const celebrateMsg = document.getElementById('celebrateMsg');
const confCanvas = document.getElementById('confCanvas');
let confTimer = null, confPieces = [];

function doCelebrate(){
  celebrateWrap.style.display='block';
  celebrateMsg.style.display='block';
  confCanvas.style.display='block';
  resizeCanvas(); createConfetti(); confTimer=setInterval(drawConfetti,30);
}
document.getElementById('closeCelebrate').addEventListener('click', ()=>{
  clearInterval(confTimer);
  confCanvas.style.display='none';
  celebrateMsg.style.display='none';
  celebrateWrap.style.display='none';
});

// Confetti (simple)
const ctx = confCanvas.getContext && confCanvas.getContext('2d');
function resizeCanvas(){ confCanvas.width = window.innerWidth; confCanvas.height = window.innerHeight; }
function createConfetti(){ confPieces = []; for(let i=0;i<120;i++){ confPieces.push({ x: Math.random()*confCanvas.width, y: Math.random()*-confCanvas.height, r: Math.random()*6+4, color: ['#ff5a5f','#ffb400','#4CAF50','#0288d1','#9b59b6'][Math.floor(Math.random()*5)], speed: 2+Math.random()*4, d: Math.random()*40 }); } }
function drawConfetti(){ if(!ctx) return; ctx.clearRect(0,0,confCanvas.width, confCanvas.height); confPieces.forEach(p=>{ ctx.fillStyle = p.color; ctx.fillRect(p.x, p.y, p.r, p.r*0.6); p.x += Math.sin(p.d) + 1 + Math.random()*2; p.y += p.speed + Math.random()*2; p.d += 0.03; if(p.y > confCanvas.height){ p.y = -10; p.x = Math.random()*confCanvas.width; } }); }
window.addEventListener('resize', resizeCanvas);


// Estimated supporters counter (centered)
const counterEl = document.getElementById('counterNum');
let cnt = 5200;
counterEl.textContent = cnt.toLocaleString() + '+';
setInterval(()=>{
  const inc = Math.random() < 0.8 ? Math.floor(Math.random()*3) : Math.floor(Math.random()*12);
  cnt += inc;
  counterEl.textContent = cnt.toLocaleString() + '+';
}, 3500);

// allow pressing Enter to trigger pay
document.getElementById('donationAmount').addEventListener('keypress', (e)=>{
  if(e.key === 'Enter'){ document.getElementById('payButton').click(); }
});

// ensure anchors to #donate open popup
document.querySelectorAll('a[href="#donate"]').forEach(a=> a.addEventListener('click', (e)=>{ e.preventDefault(); openDonateModal(); }));

</script>
</body>
  </html>
  
